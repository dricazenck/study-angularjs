<!DOCTYPE html>
<html lang="en" ng-app="order" ng-controller="OrderController as orderCtrl">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>{{orderCtrl.titleApp}}</title>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/order.css" />
    </head>

    <body>
        <div>
            <h2 class="page-header">{{orderCtrl.nameApp}}</h2>

            <div class="panel panel-default category">
                <div class="panel-heading">
                    <h3 class="panel-title">Menu</h3>
                </div>
                <div class="panel-body">
                    <table class="table table-striped table-hover">
                        <thead>
                            <th>#</th>
                            <th>Drink</th>
                            <th>Price</th>
                        </thead>
                        <tr ng-repeat="product in orderCtrl.products">
                            <td>{{product.id}}</td>
                            <td>{{product.name}}</td>
                            <td>{{product.price}}</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="panel panel-default category">
                <div class="panel-heading">
                    <h3 class="panel-title">Ordering Drinks</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label>Table Number</label>
                        <input ng-model="orderCtrl.order.table" type="text" class="form-control" placeholder="Insert table number">
                    </div>
                    <div>
                        <div class="form-group order-drink">
                            <label>Drink</label>
                            <select ng-model="orderCtrl.item.product" ng-options="product.name for product in orderCtrl.products"
                            type="select" class="form-control">
                                <option value="">--- Select one drink ---</option>
                            </select>
                        </div>  
                        <div class="form-group order-quantity">
                            <label>Quantity</label>
                            <input ng-model="orderCtrl.item.quantity" ng-disabled="!orderCtrl.item.product" type="text" class="form-control">
                        </div> 
                    </div>
                    
                    <button class="btn btn-default" ng-click="orderCtrl.addItem(orderCtrl.item)">Insert new drink</button>
                    
                    <div class="form-group" ng-hide="orderCtrl.order.items.length == 0">
                        <table class="table table-striped table-hover">
                            <thead>
                                <th>Item</th>
                                <th>Quantity</th>
                                <th>Price</th>
                                <th>Subtotal</th>
                            </thead>
                            <tr ng-repeat="item in orderCtrl.order.items">
                                <td>{{item.product.name}}</td>
                                <td>{{item.quantity}}</td>
                                <td>{{item.product.price}}</td>
                                <td>{{item.subtotal}}</td>
                            </tr>
                        </table>
                    </div>
                    <button ng-click="orderCtrl.finalizeOrder(orderCtrl.order)" class="btn btn-default" ng-hide="orderCtrl.order.items.length == 0">Finalize Order</button>
                </div>
            </div>
        
            <div class="panel panel-default category" ng-if="orderCtrl.orders">
                <div class="panel-heading">
                    <h3 class="panel-title">Ordered</h3>
                </div>
                <div class="panel-body">
	                <table class="table table-striped table-hover">
	                    <thead>
	                        <th>Id</th>
	                        <th>Table</th>
	                        <th>Status</th>
	                        <th>Total</th>
	                    </thead>
	                    <tr ng-repeat="order in orderCtrl.orders">
	                        <td>{{order.id}}</td>
	                        <td>{{order.table}}</td>
	                        <td>{{order.status}}</td>
	                        <td>{{order.total}}</td>
	                    </tr>
	                </table>
                </div>
            </div>
        </div>

        <script src="lib/angular.min.js"></script>
        <script src="js/models.js"></script>
        <script src="js/app.js"></script>
    </body>
</html>